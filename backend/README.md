############# Branches Information #############

# Main Branch :-

## Contains the Open AI based OCR data extractor in Image_text_extractor


# feature/v1-dev :-

## Contains the Tesseract based OCR Data extractor in Image_text_extractor

# feature/version-2 :-

## Contains the new code format which uses only locator not ocr and has a SmartAI concept used during methods generation.

---

## Database Setup

The backend uses Alembic migrations and persists everything in the database referenced by `DATABASE_URL`. Every environment must point to its own Postgres instance and run migrations before starting the API.

### First-time setup (Local / Docker)
1. **Configure the connection string**
   - Copy `.env.example` to `.env` if needed.
   - Set `DATABASE_URL=postgresql+psycopg://user:password@host:5432/testify` before running any backend processes.

2. **Run migrations (recommended)**
   ```bash
   python scripts/setup_db.py
   ```
   This runs `alembic upgrade head` using the configured `DATABASE_URL`.

### Docker migration command (safe for shared databases)
Run migrations explicitly before starting the backend container:
```bash
docker compose run --rm backend alembic -c backend/database/alembic.ini upgrade head
```

### AUTO_MIGRATE for local/CI (optional)
Set `AUTO_MIGRATE=true` to allow guarded, one-time migrations on startup when the schema is behind. This is OFF by default and should remain OFF in production.

Existing project endpoints (`/projects/save-details`, `/projects`, `/projects/activate`) now persist to the `projects` table and automatically prepare project directories under `backend/<project_name>/...`.

Project file edits performed through the `/projects/{id}/files/*` APIs are duplicated into the `project_files` table so their latest contents are always stored in the shared database (in addition to the on-disk copy the SmartAI runtime still requires).

## Visualizer output configuration

Interactive Plotly dashboards and static snapshot images generated by `allure_visualizer.py` are served through the `/visualizer/*` endpoints. By default the backend looks for assets inside `allure_reports/` in the repo root, but you can point it to a different folder (for example the path you pass via `--output-dir`) by setting one of these environment variables before starting the API:

- `VISUALIZER_OUTPUT_DIR`
- `ALLURE_OUTPUT_DIR`
- `SMARTAI_VISUALIZER_DIR`

On Windows PowerShell:

```powershell
$env:VISUALIZER_OUTPUT_DIR = 'C:\Users\DELL\OneDrive\Desktop\project-ai\allure_report'
```

On bash:

```bash
export VISUALIZER_OUTPUT_DIR="/mnt/c/Users/DELL/OneDrive/Desktop/project-ai/allure_report"
```

Make sure the directory contains the generated `interactive_charts.html` file and the PNG snapshots before pressing the **Visualize** button in the UI; otherwise the frontend will keep falling back to static thumbnails.


